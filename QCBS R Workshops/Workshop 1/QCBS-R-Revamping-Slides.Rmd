---
title: "Workshop 1: Introduction to R"
author: Qu√©bec Centre for Biodiversity Science
output:
  revealjs::revealjs_presentation:
    css: custom-qcbs.css
    fig_caption: yes
    theme: white
    highlight: haddock
    center: true
    transition: fade
    background_transition: fade
    self_contained: false
    pandoc_args: [ "--slide-level", "2" ]
    reveal_plugins: ["notes", "search", "zoom"]
---

# R Workshop Series

## Workshop 1: Introduction to R

Website:http://qcbs.ca/wiki/r/workshop1

<img style="float: right; width: 200px;" src="images/QCBS_logo.png">

# Introduction

## What is R?

<div id = left>

R is an open source programming language designed for statistical analysis, data mining, and data visualization.

</div>

<img style="float: right; width: 200px;" src="images/R_logo.png">

## Why use R?

<div id = left>

**It's open source**

 - Improved by the public, for the public!
 - Free

 </div>

<img style="float: right; width: 200px;" src="images/Opensource.svg">

## Why use R?

<center><img style="width: 700px; " src="images/operating_stm.png"></center>

**It's compatible**

R works on most existing operating systems

## Why use R?

What people have traditionally done to analyze their data:

<image Data to understanding>

## Why use R?

<image Analyzing data with R>

R allows you to do everything with one program, which is nice!

## Why use R?

<img style="float: left; width: 450px;" src="images/Rpackages.png">

<div id = "right">

 - More and more scientists use it every year!
 - Increasing capacities

 </div>

## Challenge

<div id = "left">

 - Throughout these workshops you will be presented with a series of challenges that will be indicated by these rubiks cubes
 - During challenges, collaborate with your   neighbours!

</div>

<img style="float: right; width: 350px;" src="images/rubicub.png">

## Challenge 1

<img style="position:absolute; top:0 ; right: 0; padding:5px; width: 75px;" src="images/rubicub.png">

<center>Open Rstudio</center>

<center><img style="width: 200px;" src="images/Rstudio.png"></center>

## The Rstudio console

<img>

## Note for Windows user

If the restriction:
"unable to write on disk"
appears when you try to open R-Studio,

**Don't worry!**
We have the solution
right-click on your R-Studio icon and chose:
"Execute as administrator" to open the program.

## How to read the console

Text in the console typically looks like this:
<small>You always have to push "enter" for the input to run in the console.</small>

```{r, include = FALSE}
  output <- "This is the output"
```

```{r}
  output
```

## How to read the console

```{r}
  output
```

<put an arrow here>

What does this bracket in the output means?

## How to read the console

```{r}
  output
```
<put an arrow here>
This bracket help you to locate "where" you are in the output

```{r, echo = FALSE}
	c(1:40)
```

# Using R as a calculator

## Addition, substraction, etc.

- Additions and Substractions

```{r}
	1+1
  10-1
```

- Multiplications and Divisions

```{r]
	2*2
  8/2
```

- Exponents

```{r}
	2^3
```

## Challenge 2

<img style="position:absolute; top:0 ; right: 0; padding:5px; width: 75px;" src="images/rubicub.png">


Use R to calculate the following skill testing question:

$$
2+16*24-56
$$

<small>Hints: The `*` symbol is used to multiply</small>

## Challenge 2: Solution

<img style="position:absolute; top:0 ; right: 0; padding:5px; width: 75px;" src="images/rubicub.png">

- Question

$$
2+16*24-56
$$

- Solution

```{r}
	2+16*24-56
```

## Challenge 3

<img style="position:absolute; top:0 ; right: 0; padding:5px; width: 75px;" src="images/rubicub.png">

Use R to calculate the following skill testing question:

$$
2+16*24-56 / (2+1)-457
$$

<small>Hints: Think about the order of the operation.</small>

## Challenge 3: Solution

<img style="position:absolute; top:0 ; right: 0; padding:5px; width: 75px;" src="images/rubicub.png">

- Question

$$
2+16*24-56 / (2+1)-457
$$

- Solution

```{r}
	2+16*24-56/(2+1)-457
```

Note that R follows the order of the operations

## R command line tip

<div id = "left">

Use the "Up" and "Down" arrow keys to reproduce previous commands.

Give it a try!

</div>

<img style="float: right; width: 350px;" src="images/keyboard_arrows.png">

## Challenge 4

<img style="position:absolute; top:0 ; right: 0; padding:5px; width: 75px;" src="images/rubicub.png">


<div id="right">


```{r echo = F, fig.width=5, fig.height=5}
  radius <- 1
  theta <- seq(0, 2*pi, length = 200)
	plot(c(-1, 1), c(-1, 1), type = "n", ann = F, axes = F, asp = 1)
	lines(x = radius * cos(theta), y = radius * sin(theta))
	arrows(0, 0, x1 = 1, length = 0)
	text(.5, .1, "radius = 5 cm", cex = .8)
```

</div>

<div id="left">

What is the area of this circle, with a radius of $5\ cm$?

</div>

## Challenge 4: Solution

<img style="position:absolute; top:0 ; right: 0; padding:5px; width: 75px;" src="images/rubicub.png">

- Question

What is the area of a circle, with a radius of $5\ cm$?

- Solution

```{r}
  3.1416*5^2
```

Tip: Note that `R` has some built-in constant such as $\pi$, so you can write:

```{r}
  pi*5^2
```

# Objects

## Objects

- One of the most useful concept in `R`!
- You can store values as named objects using the assignement operator `<-`

```{r, eval = F}
  object name <- assigned value
```

The value on the **right** is assigned to the name on the **left** with the assignement operator `<-`

 <small>It is also possible to use the `=` sign, but it is better to **avoid it** as it is also used for other purposes.</small>

## Objects names

- Objects names can only include:

|  Type      |  Symbol |
|------------|--------:|
| Letters    | a-z A-Z |
| Numbers    |     0-9 |
| Period     |       . |
| Underscore |       _ |

- Objects names should **always** begin with a letter.
- `R` is **case sensitive**, the names `Data1` and `data1` are not the same.

## Object names: good practices

- Try having short and explicit names for your variables. Naming a variable `var`  is not very informative.
- Adding spaces after and before the `<-` is recommended because it adds clarity.
- When typing the object's name, `R` return its value.

```{r}
  mean.x <- (2+6)/2
  mean.x
```

## Challenge 5

<img style="position:absolute; top:0 ; right: 0; padding:5px; width: 75px;" src="images/rubicub.png">


Create an object with a value of 1+1.718282 (Euler's number) and name it `euler.value`.

## Challenge 5: Solution

<img style="position:absolute; top:0 ; right: 0; padding:5px; width: 75px;" src="images/rubicub.png">

- Question

Create an object with a value of 1+1.718282 (Euler's number) and name it `euler.value`.

- Solution

```{r}
  euler.value <- 1+1.718282
  euler.value
```

## Challenge 6

<img style="position:absolute; top:0 ; right: 0; padding:5px; width: 75px;" src="images/rubicub.png">

Create a second object (you decide the name) with a name that starts with a number. What happens?

## Challenge 6: Solution

<img style="position:absolute; top:0 ; right: 0; padding:5px; width: 75px;" src="images/rubicub.png">

- Question

Create a second object (you decide the name) with a name that starts with a number. What happens?

- Solution

Creating an object name that starts with a number returns the following error:

```{r, eval = F}
 Error: unexpected symbol in "[your object name]"
```

## R command line tip

- Use the tab key to autocomplete scripts
- This helps avoid spelling errors and speeds up command entering

Let's try it!

## R command line tip

- Enter `eu`
- Push tab
- Use the arrow keys and push enter to select the correct autocomplete

# Types of data structures in R

## Types of data structures in R

- Vectors
- Data frames
- Matrices, arrays and lists

## Vectors

- An entity consisting of a list of related values
- A single value is called an *atomic value*
- All values of a vector must have the **same mode** (or class).
      * Numeric: only numbers
      * Logical: True/False entries
      * Character: Text, or a mix of text and other modes

## Vectors

- Creating vectors usually require the `c` function

<small>`c` stands for *combine* or *concatenate*.</small>

- The syntax is:

```{r, eval = F}
  vector <- c(value1, value2, ...)
```

## Vectors

- Numeric vectors

```{r}
  num.vector <- c(1, 4, 3, 98, 32, -76, -4)
  num.vector
```

- Character vectors

```{r}
  char.vector <- c("blue", "red", "green")
  char.vector
```

## Vectors

- Logical vectors

```{r}
 bool.vector<- c(TRUE, TRUE, FALSE)
 bool.vector
 # You can just write T for TRUE and F for FALSE, it's exactly the same
 bool.vector2 <- c(T, T, F)
 bool.vector2
```

## Challenge 7

<img style="position:absolute; top:0 ; right: 0; padding:5px; width: 75px;" src="images/rubicub.png">

Create a vector containing the first 5 odd numbers, starting from 1, and name it `odd.n`

## Challenge 7: Solution

<img style="position:absolute; top:0 ; right: 0; padding:5px; width: 75px;" src="images/rubicub.png">

- Question

Create a vector containing the first 5 odd numbers, starting from 1, and name it `odd.n`

- Solution

```{r}
 odd.n <- c(1,3,5,7)
```

## Vectors

We can use vectors for calculations

```{r}
  x <- c(1:5)
  y <- 6
```

<small>The semicolon symbol `:` is use to combine all values between the first and the second provided numbers. `c(1:5)` returns `1, 2, 3, 4, 5`</small>

```{r}
  x+y
  x*y
```

## Data Frames

- Used to store data tables
- A list of vectors of the same length
- Columns = variables
- Rows = observations, sites, cases, replicates, ...
- Differents columns can have different modes

## Data Frames

Let's say you want to store this table in `R`:

|ID of the site|soil pH|# of species|treatment|
|---|---|---|---|
|A1.01|5.6|17|Fert|
|A1.02|7.3|23|Fert|
|B1.01|4.1|15|No Fert|
|B1.02|6.0|7|No Fert|

## Data Frames

One way of doing it is:
- Start by creating vectors

```{r}
  siteID <- c("A1.01", "A1.02", "B1.01", "B1.02")
  soil_pH <- c(5.6, 7.3, 4.1, 6.0)
  num.sp <- c(17, 23, 15, 7)
  treatment <- c("Fert", "Fert", "No_fert", "No_fert")
```

- We then combine them using the function `data.frame`

```{r}
  my.first.df <- data.frame(siteID, soil_pH, num.sp, treatment)
```

<small>We will come back to the `data.frame` function later.</small>

## Data Frames

```{r}
  my.first.df
```

## Matrices, Arrays and Lists

Image!

## Indexing objects

Sometimes, we only want to look at or extract part of our data. This is done using **brackets:** `[]`

We indicate the **position** of the values we want to see between the brackets. It's called *indexing*.

## Indexing vectors

```{r cache=F,echo=F}
s0 <- knitr::knit_hooks$get('source')
o0 <- knitr::knit_hooks$get('output')

knitr::knit_hooks$set(
  list(
    source=function(x,options){
      if (is.null(options$class)) s0(x, options)
      else
        paste0(
          paste0("<div class='", options$class, "'><pre><code>")
          ,x
          ,'</code></pre>\n'
        )
    }
    ,output = function(x,options){
      if (is.null(options$class)) o0(x, options)
      else
        paste0(
          "<pre><code>"
          ,x
          ,'</code></pre></div>\n'
        )
    }
  )
)
```

<div class="fragment">
  You  can use indexing to chose a particular position, let's say we want to see the second value of our `odd.n` vector
</div>


```{r class="fragment"}
 odd.n[2]
```

<div class="fragment">
  It also work with multiple position:
</div>


```{r class="fragment"}
 odd.n[c(2,4)]
```

<div class="fragment">
  It can be used to remove some values at particular positions
</div>

```{r class="fragment"}
 odd.n[-c(1,2)]
```

## Indexing vectors

<div class="fragment">
  If you select a position that is not in the vector it will return:
</div>

```{r class="fragment"}
 odd.n[c(1,5)]
```

<div class="fragment">
  You can also use conditions to select values:
</div>


```{r class="fragment"}
 odd.n[odd.n > 4]
```

```{r class="fragment"}
 char.vector[char.vector == "blue"]
```

<div class="fragment">
<small>Logical statements such as `>` will be described in more details later.</small>
</div>

## Challenge 8

<img style="position:absolute; top:0 ; right: 0; padding:5px; width: 75px;" src="images/rubicub.png">

Using the vector `num.vector`

- Extract the 4th value
- Extract the 1st and 3rd values
- Extract all values except for the 2nd and the 4th

## Challenge 8: Solution

<img style="position:absolute; top:0 ; right: 0; padding:5px; width: 75px;" src="images/rubicub.png">

- Extract the forth value

```{r}
  num.vector[4]
```

- Extract the 1st and 3rd values

```{r}
  num.vector[c(1,3)]
```

- Extract all values except for the 2nd and the 4th

```{r}
  num.vector[c(-2,-4)]
```

## Challenge 9

<img style="position:absolute; top:0 ; right: 0; padding:5px; width: 75px;" src="images/rubicub.png">

Explore the difference between these 2 lines of code:

```{r, eval = F}
  char.vector == "blue"
  char.vector[char.vector == "blue"]
```

## Challenge 9: Solution

<img style="position:absolute; top:0 ; right: 0; padding:5px; width: 75px;" src="images/rubicub.png">

```{r}
  char.vector == "blue"
```

In this line of code, you **test a logical statement**. For each entry in the `char.vector`, `R` checks whether the entry is equal to `"blue"` or not.

```{r}
  char.vector[char.vector == "blue"]
```

In this line of code, you ask `R` to extract all values within the `col.vector` vector that are exactly equal to `"blue"`.

## A quick note on logical statements

- `R` allows testing of logical statements, *i.e.* testing whether a statement is true or false.

- You need to use logical operators for that.

|Operator|Description|Example|
|---|---|---|
|`<` and `>`|less than or greater than|`odd.n > 3`|
|`<=` and `>=`|less/greater or equal to|`odd.n >= 3`|
|`==`|exactly equal to|`odd.n == 3`|
|`!=`|not equal to|`odd.n != 3`|
|`x | y`|x OR y|`odd.n[odd.n >= 5 | odd.n < 3]`|
|`x & y`|x and y|`odd.n[odd.n >=3 & odd.n < 7]`|

## Indexing data frames

To index a data frame you must specify two dimensions: row and column number, using the following syntax:

`data.frame.name[row,column]`

## Indexing data frames: examples

```{r class="fragment", eval = F}
 my.first.df[1,]
```

<div class="fragment">
  Extracts the first line

  <small>Note that an empty index select **all** the values.</small>
</div>

```{r class="fragment", eval = F}
 my.first.df[,3]
```

<div class="fragment">
  Extracts the third column
</div>

```{r class="fragment", eval = F}
 my.first.df[2,4]
```

<div class="fragment">
  Extracts the second element of the fourth column
</div>

## Indexing data frames: examples

```{r class="fragment", eval = F}
 my.first.df[c(2,4),]
```

<div class="fragment">
  Extracts lines 2 to 4

  <small>The examples given so far are also valid for indexing matrices, this is not the case for the following examples.</small>
</div>

```{r class="fragment", eval = F}
 my.first.df$siteID
```

<div class="fragment">
  Extracts the variable `siteID` from the data frame
</div>

```{r class="fragment", eval = F}
 my.first.df$siteID[2]
```

<div class="fragment">
  Extracts the second value of the variable `siteID` from the data frame
</div>

```{r class="fragment", eval = F}
 my.first.df$[c("siteID", "soil_pH")]
```

<div class="fragment">
  Extracts the `siteID` and `soil_pH` variables from the data frame.
</div>

## Challenge 10

<img style="position:absolute; top:0 ; right: 0; padding:5px; width: 75px;" src="images/rubicub.png">

- a) Extract the `num.sp` column from `my.first.df` and multiply its value by  the first four values of `num.vec`.
- b) After that, write a statement that checks if the values you obtained are greater than 25.

## Challenge 10: Solution

<img style="position:absolute; top:0 ; right: 0; padding:5px; width: 75px;" src="images/rubicub.png">

<div class="fragment">
  Part a):
</div>

```{r class="fragment"}
 my.first.df$num.sp * num.vector[c(1:4)]
 # or
 my.first.df[,3] * num.vector[c(1:4)]
```

<div class="fragment">
  Part b):
</div>

```{r class="fragment"}
 (my.first.df$num.sp * num.vector[c(1:4)]) > 25
```

# Functions

## Functions

## Functions

## Arguments

## Challenge 11

<img style="position:absolute; top:0 ; right: 0; padding:5px; width: 75px;" src="images/rubicub.png">

## Challenge 11: Solution

<img style="position:absolute; top:0 ; right: 0; padding:5px; width: 75px;" src="images/rubicub.png">

- Question

- Solution

## Arguments

## Challenge 12

<img style="position:absolute; top:0 ; right: 0; padding:5px; width: 75px;" src="images/rubicub.png">

## Challenge 12: Solutions

<img style="position:absolute; top:0 ; right: 0; padding:5px; width: 75px;" src="images/rubicub.png">

- Question

- Solution

## Some common functions

## Packages

## Packages

# Getting help

## Searching for functions

## Search results

## Getting help with functions

## Help pages

## Usage

## Arguments

## Details

## Value

## See Also

## Examples

## Challenge 13

<img style="position:absolute; top:0 ; right: 0; padding:5px; width: 75px;" src="images/rubicub.png">

## Challenge 13: Solutions

<img style="position:absolute; top:0 ; right: 0; padding:5px; width: 75px;" src="images/rubicub.png">

- Question

- Solution

## Other ways to get help

## Challenge 13

<img style="position:absolute; top:0 ; right: 0; padding:5px; width: 75px;" src="images/rubicub.png">

## Challenge 13: Solutions

<img style="position:absolute; top:0 ; right: 0; padding:5px; width: 75px;" src="images/rubicub.png">

- Question

- Solution

# Additional resources

## Some useful R books

## Some useful R websites

# Thank you for attending!
