---
title: "Workshop 1: QCBS R Workshop Series"
author: Qu√©bec Centre for Biodiversity Science
output:
  revealjs::revealjs_presentation:
    css: custom-qcbs.css
    fig_caption: yes
    theme: white
    highlight: haddock
    center: true
    transition: fade
    background_transition: fade
    self_contained: false
    pandoc_args: [ "--slide-level", "2" ]
    reveal_plugins: ["notes", "search", "zoom"]
---


## R Markdown

This is an R Markdown presentation. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document.

<small>This sentence will appear smaller.</small>

# Section Title Slide

## Vertical Slide with Incremental Bullets

> - Bullet 1
> - Bullet 2
> - Bullet 3

### Begins a new header within a slide

## Vertical Slide with Incremental Bullets
> - Level 1 item
>      * Level 2 item
>      * Level 2 item
> - Level 1 item

## Vertical Slide with Normal Text and Small Text

This is a normal text.

<small>This sentence will appear smaller.</small>

## Vertical Slide with Text Aligned to the Right

<div id="right">

- You can place two graphs on a slide
- Or two columns of text
- These are all created with div elements

</div>

<div id="left">

- You can place two graphs on a slide
- Or two columns of text
- These are all created with div elements

</div>

## Vertical Slide with Quote Text

> R Markdown is amazing!

## Vertical Slide with Images

![Caption for the picture.](/images/logo_text.png)

![An image](/images/logo_text.png) <!-- .element height="50%" width="50%" -->

<img src="/images/logo_text.png" width="40%">

## Test


* a
* picture
* says more
* than a thousand words

or

1. item 1
1. item 2

# Code Section

## Slide with R Code and Output

```{r}
summary(cars)
```

## Slide with Plot

```{r, echo=FALSE}
plot(cars)
```

## Slide with R Code and No Output

```{r, eval = FALSE}
summary(cars)
```

## Slide with a ggplot2 plot


```{r, echo = TRUE}
library(ggplot2)
data(diamonds)
diamonds <- diamonds[sample(1:nrow(diamonds),2000),]

ggplot(diamonds, 
       aes(carat, price)) +
  geom_point(color="firebrick")
```


## Slide with another ggplot, grid and arrows between them

```{r, echo=FALSE}
library(ggplot2)
library(gridExtra)
library(grid)
library(png)

download.file("https://maxcdn.icons8.com/Share/icon/p1em/arrows//arrow1600.png",
              tf <- tempfile(fileext = ".png"),
              mode="wb")
arrow <- rasterGrob(readPNG(tf))
p <- ggplot(diamonds, aes(clarity, fill=cut)) + 
  geom_bar() 
grid.arrange(p + guides(fill = "none"), 
             arrow, 
             p + guides(fill = "none"), 
             arrow, 
             p, 
             ncol=5, widths=c(2/10, 0.5/10, 2/10, 0.5/10, 3/10)) #Edit the size of the arrows and graphs here
```



https://stackoverflow.com/questions/34744655/how-to-make-a-chain-of-ggplots-and-draw-arrows-between-them


## Use a zoom transition, ggplot and plotly! {data-transition="zoom"}

_It is interactive!!!_


```{r plotly, message = FALSE, echo = FALSE}
library(ggplot2)
library(plotly)
g <- ggplot(mpg, 
            aes(x = -cty, 
                y = hwy, 
                colour = as.factor(cyl))) +
  geom_point()
ggplotly(g)
```

## Use a faster speed {data-transition-speed="fast"}

This slide has a figure caption.

```{r,echo = FALSE, warning = FALSE,message=FALSE, fig.cap= "Cars"}

library(ggplot2)
data(mtcars)
g <- ggplot(mpg, aes(class))
g <- g + geom_bar()

print(g)

```

## Incrementaly reveal code

```{r cache=F,echo=F}
s0 <- knitr::knit_hooks$get('source')
o0 <- knitr::knit_hooks$get('output')

knitr::knit_hooks$set(
  list(
    source=function(x,options){
      if (is.null(options$class)) s0(x, options)
      else
        paste0(
          paste0("<div class='", options$class, "'><pre><code>")
          ,x
          ,'</code></pre>\n'
        )
    }
    ,output = function(x,options){
      if (is.null(options$class)) o0(x, options)
      else 
        paste0(
          "<pre><code>"
          ,x
          ,'</code></pre></div>\n'
        )
    }
  )
)
```

What is the `mean(1:3)`?

```{r class="fragment"}
mean(1:3)
```

<div class="fragment">
  This works fine! The `div` does not appear until you click forward in the deck. But you cannot put the `div` tags around a code fragment!
</div>

<div class="fragment">
What do we type to get the mean from a vector that goes from 1 to 5?
</div>

```{r class="fragment"}
mean(1:5)
```

## Incrementaly reveal plots

```{r cache=F,echo=F}
c0 <- knitr::knit_hooks$get('chunk')

knitr::knit_hooks$set(
  list(
    chunk=function(x,options){
      if(is.null(options$class) & is.null(options$fragIndex)){
        c0(x, options)
      } else if(is.null(options$fragIndex)) {
        classidx <- which(names(options)=="class")
        paste0(
          paste0("<span class='", options$class, "'>"),
          c0(x, options[-classidx]),
          '</span>\n'
        )
      }
      else if(length(options$fragIndex)==1) {
        classidx <- which(names(options)%in%c("class", "fragIndex"))
        str_replace(
          paste0(
            paste0("<span class='", options$class, "' data-fragment-index=", options$fragIndex,">"),
            c0(x, options[-classidx]),
            '</span>\n'
          ),
          "<div class=\"chunk\" id=\"(.*?)\">\\s*<div class=\"rimage default\">(.*)</div>\\s*</div>",
          "\\2"
        )
      } else {
        classidx <- which(names(options)%in%c("class", "fragIndex"))
        str_replace(
          paste0(
            paste0("<span class='", options$class, " fade-in' data-fragment-index=", options$fragIndex[1],">"),
            paste0(
              paste0("<span class='", options$class, " fade-out' data-fragment-index=", options$fragIndex[2],">"),
              c0(x, options[-classidx]),
              '</span>\n'
              ),
            '</span>\n'
            ),
          "<div class=\"chunk\" id=\"(.*?)\">\\s*<div class=\"rimage default\">(.*)</div>\\s*</div>",
          "\\2"
        )
        
      }
        
    }
  )
)
```

## Slides with Equations

With *equations*:

$$\sum_{i=0}^n i^2 = \frac{(n^2+n)(2n+1)}{6}$$

## More equations

Inline equation, just like this $equation$, and...

Display equation:

$$ equation $$

# Special Transitions and Color Effects

## Fade in, Slide out {data-transition="slide-in fade-out"}

## Horizontal Rule / Page Break

Three or more asterisks or dashes:

******

Result in this

------

## Tables

First Header  | Second Header
------------- | -------------
Content Cell  | Content Cell
Content Cell  | Content Cell

## Reference Style Links and Images

### Links

A [linked phrase][id].
At the bottom of the document:

[id]: http://example.com/ "Title"

### Images
![QCBSLOGO][logo-qcbs]

At the bottom of the document:

[logo-qcbs]: /images/logo_text.png "QCBS Logo"

## Slide in, Fade out {data-transition="fade-in slide-out"}

## CSS color background {data-background=#ff0000}

## CSS color background {data-background=#D3D3D3}

## CSS color background {data-background=#EBF5FB}

Refer to HEX codes in [HTML Color Codes](http://htmlcolorcodes.com/) for other colors.

## Full size image background {data-background="https://qcbs.ca/wp-content/uploads/2010/05/QCBS_widescreen_background_white-01.png"}

## Video embeded

<iframe width="560" height="315" src="https://www.youtube.com/embed/wA9OJkCFtLU" frameborder="0" allowfullscreen></iframe>

## {data-background-iframe="http://qcbs.ca/wiki/r"}

# Extra information

## Next Steps {#nextsteps .emphasized}

<span class="emphasized">Pay attention to this!</span>


